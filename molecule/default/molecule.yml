---
driver:
  name: hetznercloud
lint: |
  set -e
  yamllint .
platforms:
  - name: instance1
    server_type: cx11
    image: debian-10
  - name: instance2
    server_type: cx11
    image: debian-10
  - name: instance3
    server_type: cx11
    image: debian-10
provisioner:
  name: ansible
  config_options:
    defaults:
      interpreter_python: auto_silent
  inventory:
    group_vars:
      all:
        zookeeper_version: 3.6.1
        zookeeper_members: "{{ groups['all'] | map('extract', hostvars, 'ansible_default_ipv4') | map(attribute='address') | list }}"
    host_vars:
      instance1:
        zookeeper_member_id: 1
      instance2:
        zookeeper_member_id: 2
      instance3:
        zookeeper_member_id: 3

  lint: |
    set -e
    ansible-lint
  playbooks:
    create: ../resources/playbooks/create.yml
    destroy: ../resources/playbooks/destroy.yml
verifier:
  name: ansible
  lint: |
    set -e
    ansible-lint
dependency:
  name: galaxy
  options:
    role-file: molecule/resources/requirements.yml
